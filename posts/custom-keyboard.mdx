---
title: "Custom Keyboard"
date: "2023-10-04"
---

In early 2023, I made a small prototype pcb of a macropad using a battam cnc. This was a 4x4 macropad that tried out the concepts of a diode matrix and pcb cutting. It led to 4 header pins that I connected to a breadboard with a Adafruit Bluefruit. It was choosen because it uses the widely supported Atmega32u4-au while having bluetooth. I flashed the microchip with [qmk](https://github.com/flooof/qmk_firmware) and then tested bluetooth connectivity. After that I added knob support using a tc11 rotary encoder and was able to use it to control volume. 

I was busy for a while so was not able to work on it but continued the project in April of 2024 as a Passion Project for a class. This time I am building a 42% keyboard, this layout was choosen as it is the smallest with all the letters and important keys. Last time, I used the middle school's cnc which the teacher has made many pcbs on but now in high school the teacher has never made a pcb so I had to learn how to use the machine myself. 

I designed the schematic and the pcb in kicad which is a open source software that I am used to  and then used flatcam to convert the pcb into  paths for the cnc to follow. I can make the keyboard pcb on a carbide nomad 883 cnc and the case out of sheet aluminum on a omax water jet. I had to use a two sided pcb because the pathes were very complicated because I wanted to not use a external microchip header board but solder the microchip directly which requres wiring for things such as the clock, usb, and the decopling capacitors. I can use vias which connect the two sides of the pcb where I want although one concern is how long it will take to mount a lot of vias. 

My initial prototype was to learn to use the software and use the cnc so I made a 2x2 macro pad. The bit I was using was bigger then the tolorence I needed so many of the traces were destroyed, I had to buy new tips

I added more tolorence on a second prootype to compensate for the broken bit while i waited for a new bit to ship, the second iternation also tried doble sided cuting and alignment using dowels. It was a succes as the two sides were alighned perfectly.

Now that I had the new bit, I tested various depths to see how deep I should go.

Now I want to make the full size version, the issue is that the cnc is smaller than the pcb I want to cut, in the future I can try cutting the pcb on a 770 tormach once its done setting up but we are having issues with the floor not being level. For now, we can cut it once, move the pcb, then cut a second time however the issue is the cam software, most software only allows me to tile linearly in the y axis which is what most machines allow to push stock into but the cnc I have only allows to push stock in the x axis. I overcam this by manualy tiling in carbide create by drawing rectangles and merging them differntaly and then aling using the same double sided dowels. 

My next steps for this project is a case and then rgb.